<!DOCTYPE html>
<html>
    <head>
        <title>My First Vue App</title>
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <script src="task4.js"></script>
    </head>
    <style>

        h3 {
            text-align: center;
            font-family: Arial, Helvetica, sans-serif;
        }

        h4 {
            text-align: center;
            font-family: Arial, Helvetica, sans-serif;
        }

    </style>
    <body>
        <div id="app">
            <h1 style="background-color:darksalmon; color:white; font-family: Arial, Helvetica, sans-serif; text-align: center;">My Vue To Do List</h1>

            <b><h4 v-show="remaining > 0">You have {{ remaining }} uncompleted task<span v-show="remaining > 1">s</span></h4>
            
            <h3 v-show="remaining < 1">Completed all tasks, well done!</h3>
            </b>
            <input type="text" placeholder="Add a task" v-model="newToDo" autofocus />

                <button class="ui teal right labeled icon button" @click.prevent="addTask">
                    <i class="plus icon"></i> Add Task
                </button>
            <ol>
                <li v-for="todo in todos">
                    <label>
                        <input type="checkbox" v-on:change="myToggle(todo)" v-bind:checked="todo.done">
                        <del v-if="todo.done">
                            {{ todo.text }} <p id="date"> Added On: {{todo.date}}</p>
                        </del>
                        <span v-else>
                            {{ todo.text }} <p id="date">Added On: {{todo.date}}</p>
                        </span>
                    </label>
                </li>
            </ol>
        </div>
    </body>
    <script>
        new Vue({
            el: "#app",
            data: {
                todos: [
                    { text: "Week 1 Content", done: true, date: "17/07/2022"},
                    { text: "Start Assessment 3", done: true, date: "23/09/2022"},
                    { text: "Start Project Proposal", done: true, date: "05/08/2022"}
                ]
            },
            computed: {
                remaining: function () {
                    var uncompleted = 0;
                    for (var index in this.todos) {
                        if(!this.todos[index].done) {
                            uncompleted++;
                        }
                    }
                    return uncompleted;
                },
            },

            methods: {
                myToggle: function(todo){
                    todo.done = !todo.done
                },
                addT: function () {
                    
                    var today = new Date();
                    var dd = String(today.getDate()).padStart(2, '0');
                    var mm = String(today.getMonth() + 1).padStart(2, '0');
                    var yyyy = today.getFullYear();

                        today = dd + '/' + mm + '/' + yyyy;

                    if (this.newToDo !== '') {

                        this.todos.unshift({
                            text: this.newToDo,
                            done: false,
                            date: today
                        });

                        this.newToDo = '';
                    }
                }
            }
        })
    </script>
</html>

